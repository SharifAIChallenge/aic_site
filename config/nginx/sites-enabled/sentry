server {

    listen 4444;

    server_name aichallenge.sharif.edu;
    keepalive_timeout    0;
    error_log /aic_site/logs/sentry_nginx.log info;

    # use very aggressive timeouts
    proxy_read_timeout 5s;
    proxy_send_timeout 5s;
    send_timeout 5s;
    resolver_timeout 5s;
    client_body_timeout 5s;

    # buffer larger messages
    client_max_body_size 5m;
    client_body_buffer_size 100k;

    location / {
        proxy_redirect      off;
        proxy_set_header    Host                    $host:$server_port;
        proxy_set_header    X-Real-IP               $remote_addr;
        proxy_set_header    X-Forwarded-For         $proxy_add_x_forwarded_for;
        proxy_set_header    X-Forwarded-Protocol    $scheme;
        proxy_pass          http://localhost:9000;
    }
}

