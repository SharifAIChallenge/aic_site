{% extends "base/base.html" %}
{% load static i18n %}

{% block extra_header %}
<link rel="stylesheet" href="{% static 'css/style_tables.css' %}">
{% endblock %}


{% block container %}
<h2>{% trans 'Scoreboard' %}</h2>
{% for table in tables %}
<table class="ui red center aligned selectable unstackable table" style="margin-bottom:20px;">
    <thead>
    <tr>
        <th colspan="5">{{ table.name }}</th>
    </tr>
    <tr>
        <th class="collapsing">{% trans 'Rank' %}</th>
        <th>{% trans 'Name' %}</th>
        <th>{% trans 'Wins' %}</th>
        <th>{% trans 'Loses' %}</th>
    </tr>
    </thead>
    <tbody>
    {% for competitor in table.league_scoreboard %}
    <tr>
        <td>
            <div class="ui green label">{{ competitor.rank }}</div>
        </td>
        <td>{{ competitor.name }}</td>
        <td>{{ competitor.win_num }}</td>
        <td>{{ competitor.lose_num }}</td>
    </tr>
    {% endfor %}
    </tbody>
    <tr>
    <tr>
        <td colspan="5">
            â€Œ<a onclick="$('#results_{{ table.id }}').toggle(300)"><i class="ui eye icon"></i>{% trans 'View/Hide Games' %}</a>
            <br>
            <table class="ui center aligned table" id="results_{{ table.id }}" style="display: none;">
                {% for single_match in table.single_matches %}
                <tr>
                    {% if single_match.winner == single_match.match.part1 %}
                    <td>
                        <a class="ui yellow circular label">
                            <i class="icon large star"></i>
                            {% trans 'Winner'%}
                        </a>
                    </td>
                    <td>{{ single_match.match.part1.depend.team.name }}</td>
                    <td>VS</td>
                    <td>
                        <a class="ui grey circular label">
                            <i class="icon large star"></i>
                            {% trans 'Loser'%}
                        </a>
                    </td>
                    <td>{{ single_match.match.part2.depend.team.name }}</td>
                    {% elif single_match.winner == single_match.match.part2 %}
                    <td>
                        <a class="ui grey circular label">
                            <i class="icon large star"></i>
                            {% trans 'Loser'%}
                        </a>
                    </td>
                    <td>{{ single_match.match.part1.depend.team.name }}</td>
                    <td>VS</td>
                    <td>
                        <a class="ui yellow circular label">
                            <i class="icon large star"></i>
                            {% trans 'Winner'%}
                        </a>
                    </td>
                    <td>{{ single_match.match.part2.depend.team.name }}</td>
                    {% else %}
                    <td>
                        <a class="ui blue circular label">
                            <i class="icon large star"></i>
                            {% trans 'Unknown'%}
                        </a>
                    </td>
                    <td>{{ single_match.match.part1.depend.team.name }}</td>
                    <td>VS</td>
                    <td>
                        <a class="ui blue circular label">
                            <i class="icon large star"></i>
                            {% trans 'Unknown'%}
                        </a>
                    </td>
                    <td>{{ single_match.match.part2.depend.team.name }}</td>
                    {% endif %}

                    <td>{% trans 'In ' %} {{ single_match.map.name }}</td>
                    <td>
                        {% if single_match.log %}
                        <a class="ui label"
                           href="{% url 'game:game viewer' %}?log_url={{ single_match.log.name }}&first_team={{ single_match.match.part1.depend.team.name|urlencode }}&second_team={{ single_match.match.part2.depend.team.name|urlencode }}">{% trans 'View' %}</a>
                        {% else %}
                        <div class="ui label">{{ single_match.status }}</div>
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </table>
        </td>
    </tr>
    </tfoot>
</table>
{% endfor %}

{% endblock %}

